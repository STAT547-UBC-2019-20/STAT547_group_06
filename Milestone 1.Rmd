---
title: "Milestone 1"
author: "Carleena Ortega and Saelin Bjornson"
date: "01/03/2020"
output: html_document
---
```{r, include=FALSE}
library(ggplot2)
library(here)
library(tidyverse)
library(reshape2)
```

```{r}
data <- read_csv("adult.data.csv", col_names=FALSE)
data <- data %>% rename("age"=X1,"workclass"=X2,"fnlwgt"=X3,"education"=X4,
                        "education_num"=X5,"marital_status"=X6,"occupation"=X7,"relationship"=X8,
                        "race"=X9,"sex"=X10,"capital_gain"=X11,"capital_loss"=X12,"hours_per_week"=X13,
                        "country"=X14,"income"=X15) %>%    #give appropriate column names
  mutate(income=recode(income, ">50K"="over_50K", "<=50K"="under_50K"))     #change to better variables
  %>% mutate_at(c("workclass","education","marital_status","occupation","relationship","race","sex","country"), funs(recode(., "?" = "NA")))   #replace "?" with NAs in categorical variables

```


# Task 1: Choosing a dataset

We chose [this](https://archive.ics.uci.edu/ml/datasets/adult) data set to analyze for the group project.

# Task 2. Project Proposal and EDA

## 2.1 Introduce and describe your dataset

Who: Which company/agency/organization provided this data?
What: What is in your data?
When: When was your data collected (for example, for which years)?
Why: What is the purpose of your dataset? Is it for transparency/accountability, public interest, fun, learning, etc…
How: How was your data collected? Was it a human collecting the data? Historical records digitized? Server logs?

Additional Guidance: Your audience is fellow data scientists. You probably will not need more than 150 words to describe your dataset. All the questions above do not need to be answered, it’s more to guide your exploration and think a little bit about the context of your data. It is also possible you will not know the answers to some of the questions above, that is FINE - data scientists are often faced with the challenge of analyzing data from unknown sources. Do your best, acknowledge the limitations of your data as well as your understanding of it. Also, make it clear what you’re speculating about. For example, “I speculate that the {…column_name…} column must be related to {….} because {….}.”

|Variable|Type|Description|
|--------|-------|------|
|age|||
|workclass|||
|education|||
|educationnum|||
|marital_status|||
|occupation|||
|relationship|||
|race|||
|sex|||
|capital_gain|||
|capital_loss|||
|hours_per_week|||
|country|||
|income|||


## Task 2.2: Load your dataset (from a file or URL).
Remember that others will be running your analysis notebook so it’s important that the data is accessible to them.
If your dataset isn’t accessible as a URL, make sure to commit it directly into your repo.

## Task 2.3: Explore your dataset

Distribution of age for men and women:
```{r}
df <-select(data, sex, age) %>% mutate(sex = factor(sex, levels=c("Male", "Female"))) %>% group_by(sex)  %>% summarize(mean=mean(age))


data %>% mutate(sex = factor(sex, levels=c("Male", "Female"))) %>%
  ggplot(aes(x=age,fill=sex)) + 
  geom_histogram(alpha=0.8,position="identity") +
  #geom_vline(data=df,aes(xintercept=mean,color=sex,linetype="dashed"))+
  scale_fill_manual(values=c("skyblue2","deeppink4")) + 
  labs(title="Distribution of Age by Sex",x="Age",y="Count") +
  theme_bw() +
  theme(legend.title=element_blank())
```


Proportion of people making >50K a year for men and women, by race:
```{r}
df <- data %>% select(sex,education_num,income,race)
df$educ[df$education_num < 10] <- "PS"  #for Post-secondary
df$educ[df$education_num >= 10] <- "HS"  #for High School

df %>% filter(income =="over_50K") %>% select(race,educ,sex) %>% group_by(race,educ,sex) %>% tally() %>%
  ggplot(aes(sex, n, fill=educ)) +
  geom_bar(position="fill", stat="identity") +
 # scale_y_continuous(labels=percent()) +
  theme_bw() +
  scale_fill_manual(values=c("skyblue2","deeppink4"),labels=c("High School","Post-Secondary")) + 
  facet_wrap(~race) +
  labs(title="Education level of people making over 50K",fill="Education",y="Percent",x="Sex")
```


## Task 2.4: Research question & plan of action
1. With your data set and your EDA, identify at least one research question that you will attempt to answer with analyses and visualizations. Clearly state the research question and any natural sub-questions you need to address, and their type. The main research question should be either descriptive or exploratory.
Below are some descriptions of descriptive or exploratory research questions, adapted by Dr. Timbers from the Art of Data Science by Roger Pengand Elizabeth Matsui. 

*Exploratory Research Questions* 

2. Propose a plan of how you will analyze the data (what will you plot, which variables will you do a linear regression on?)