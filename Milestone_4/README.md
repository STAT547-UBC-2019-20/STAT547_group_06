**STAT547 Milestone 4 Repo Changes made from Milestone 3 based on feedback:**
* EDA_script.R was split into EDA_images_script.R and EDA_LM_script.R for images and linear regression (Feedback [here](https://github.com/STAT547-UBC-2019-20/group_06/issues/52))
* make all creates final_report outputs in docs folder (Feedback [here](https://github.com/STAT547-UBC-2019-20/group_06/issues/52))
* Warnings of scripts were suppressed (Feedback [here](https://github.com/STAT547-UBC-2019-20/group_06/issues/36))
* Scripts have proper documentation based on [roxygen2](https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html) style (Feedback 5 [here](https://github.com/STAT547-UBC-2019-20/group_06/issues/35))
* Added the tag release of each milestone to the main repo README (Feedback 1 [here](https://github.com/STAT547-UBC-2019-20/group_06/issues/35#issue-580158154))
* Unit tests were added to scripts (Feedback [here](https://github.com/STAT547-UBC-2019-20/group_06/issues/37)) (_To Do_) 
* In EDA_images_script.R, create a function for each plot that is then called on by main() (Feedback [here](https://github.com/STAT547-UBC-2019-20/group_06/issues/35)) (_To Do_)
* Changes to analyses were done for more informative results (not based on feedback)


**Usage**
==================
## Instructions for reproducing this analysis using individual scripts

1. Clone this repo.

2. Ensure the following packages are installed:

  - ggplot2
  - tidyverse
  - glue
  - docopt
  - broom
  - tibble
  - purrr
  - dash


3.Type the following commands (in order):

**In the Milestone_4 folder as working directory**

 **Download data with load_data.R** \
 ` Rscript scripts/load_data.R --URL="https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data" --filepath="data/adult_data.csv"`
  
  **Wrangle/clean/process the data with process_data.R** \
  `Rscript scripts/process_data.R --raw_data="data/adult_data.csv" --processed="adult_data_clean.csv"`
  
  **EDA script to export images with EDA_images_script.R** \
 `Rscript scripts/EDA_images_script.R --image_path="images/"` 
  
  **EDA script to export images with EDA_LM_script.R** \
  `Rscript scripts/EDA_LM_script.R --RDS_path="data/"`
  
  **Knit the .Rmd final report into pdf and html documents** \
  `Rscript scripts/knit_final_report.R --final_report="docs/final_report.Rmd"`
  
  
## Instructions for reproducing this analysis using GNU MAKE
1. Go to the terminal, cd to Milestone_4 
2. Type the following for the desired outcomes: 

a.`make clean` removes all files generated by the scripts.\
 _Note: To run `make all` , all folders need to be cleaned with `make clean` first_

b. `make all` runs through all the scripts from loading the raw data to knitting the final report to a html and pdf documents. 

## Instructions for launching the dashboard
1. In Milestone_4 in your terminal: \
`Rscript app.R`

2. Copy the numbers after "fire started at" and paste into address bar



**Dashboard Proposal**
==================
## Description
This dashboard will allow the user to graphically explore the effects of several factors (e.g. age, marital status, education level, and race) on the number of hours worked per week by selecting the appropriate option in the dropdown menu. 

Selecting a categorical variable (race, marital status, or education level) will display two plots, a box plot and a density plot, with groups of that variable on the x-axis and hours worked per week on the y-axis (panel 1 in sketch below). A "Separate by sex" checkbox will determine if the user wants to display the information separated by sex, side-by-side on the plot (panel 2 in sketch). The sexes will be colour coded (blue for males and red for females). A slider is included to filter the data displayed to the audience's preferred age range. 

In contrast to the categorical variables, selecting age from the dropdown menu will instead produce a line graph, with age on the x-axis and hours worked per week on they-axis (panel 3 in sketch). Selecting "Separate by sex" will produce two trend lines, one for women (red) and one for men (blue). The age slider will also be included to filter the data to the user's preferred age range, which will dynamically change the x-axis to that range. 

## Usage Scenario

Mary is in the research team of Employment and Social Development Canada. She and her team were asked to [understand] the factors that influence work force productivity to [identify] areas that require improvement and hopefully [maximize] productivity of the country. She wants to [explore] the dataset to accomplish this goal. When Mary explores the dashboard, she will see an overview of marital status' effect on work hours for individuals of all ages, which she can change to educational level, or race using the dropdown menu). She can then use the slider to filter the dataset to a certain age group she wishes to explore. If she wants to further separate the groups by sex, she may do so by ticking the "separate by sex" box. With this, she may observe that married people tend to work more hours especially during their 40's to 60's. This may mean that workers with a family tend to spend more time at work to provide for their families at the cost of spending time with their families. This could help Mary and her team to provide policies or incentives for companies or employees within this group to have a better work-life balance.

## Example sketch

![Dashboard Design](https://github.com/STAT547-UBC-2019-20/group_06/blob/master/Milestone_4/Dashboard.jpg?raw=true)
